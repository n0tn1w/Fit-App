<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <title>My Profile</title>
    <th:block th:include="fragments/commons::head"/>
    <link rel="stylesheet" th:href="@{/css/profile.css}"/>
    <meta charset="UTF-8">
</head>
<header th:replace="fragments/commons::nav"></header>

<body class="bg-blur">

    <div th:object="${user}" style="min-height: 600px" >
            <div class="text-center mt-5" style="height: 50px">
                <h1 th:text="*{username}" class=" font-weight-bold" style="display:inline-block;margin: auto"></h1>
<!--                <h1 style="display:inline">&#128736;</h1>-->
                <button type="button" class="btn font-weight-bold" style="vertical-align: middle;margin-bottom: +20px" data-toggle="modal" data-target="#changeUsernameModal">
                    &#128736;
                </button>
            </div>
            <div class="mt-3">
                <img th:if="*{profilePictureString == ''}" class="rounded-circle profile-img" th:src="@{/images/defPic.png}"/>
                <img th:unless="*{profilePictureString == ''}" class="rounded-circle profile-img"
                     th:src="*{'data:image/jpg;base64,'+ profilePictureString}"/>
            </div>
            <div class="text-center">
                <button type="button" class="btn mt-4 font-weight-bold text-uppercase" data-toggle="modal" data-target="#profilePictureModal" style="margin-left: auto;margin-right: auto;">
                    Change profile picture
                </button>
            </div>
            <div class="text-center mt-3"  >
                <div style="height: 75px;width: 600px;border: 5px solid rgba(228,92,92,0.7);background-color: rgb(214, 214, 214);border-radius: 15px;padding: 7.5px;margin: auto;">
                    <a>
                        <button th:onclick="displayInfo()" id="show-button1" class="btn text-uppercase font-weight-bold text-center float-left" style="vertical-align: middle;margin-top: auto;margin-bottom: auto;padding: 3px;font-size: 25px;height:50px;width:50px;" type="button">+</button>
                    </a>
                    <a>
                        <button th:onclick="displayInfo()" id="show-button2" class="btn text-uppercase font-weight-bold text-center float-right" style="vertical-align: middle;margin-top: auto;margin-bottom: auto;padding: 3px;font-size: 25px;height:50px;width:50px;" type="button">+</button>
                    </a>
                </div>

            </div>

            <div id="info-div" hidden="" class="mt-3" >
                <div class="mb-5 " style="width: 600px;border: 5px solid rgba(228,92,92,0.7);background-color: rgb(214, 214, 214);border-radius: 15px;padding: 7.5px;margin: auto">
                    <ol style="margin: auto">
                        <li style="font-size: 25px"><span style="font-weight:500">First Name: </span><span style="text-overflow: ellipsis;overflow:hidden;" th:text="*{firstName}"></span></li>
                        <li style="font-size: 25px"><span style="font-weight:500">Last Name: </span><span style="text-overflow: ellipsis;overflow:hidden;" th:text="*{lastName}"></span></li>
                        <li style="font-size: 25px"><span style="font-weight:500">Email: </span><span style="text-overflow: ellipsis;overflow:hidden;" th:text="*{email}"></span></li>
                        <li style="font-size: 25px"><span style="font-weight:500">Age: </span><span style="text-overflow: ellipsis;overflow:hidden;" th:text="*{age}"></span></li>
                        <li style="font-size: 25px"><span style="font-weight:500">Weight: </span><span style="text-overflow: ellipsis;overflow:hidden;" th:text="*{weight}"></span></li>
                        <li style="font-size: 25px"><span style="font-weight:500">Height: </span><span style="text-overflow: ellipsis;overflow:hidden;" th:text="*{height}"></span></li>
                        <li style="font-size: 25px"><span style="font-weight:500">Body Type: </span><span style="text-overflow: ellipsis;overflow:hidden;" th:text="*{bodyType}"></span></li>
                    </ol>
                    <div class="mb-2" style=";height: 40px">
                        <a>
                            <button class="mt-2 float-left btn text-uppercase font-weight-bold mb-2">Edit</button>
                        </a>

                        <button class="mt-2 float-right btn text-uppercase font-weight-bold mb-2" th:onclick="cancelDisplay()">Cancel</button>
                    </div>
                </div>
            </div>
    </div>


    <!-- Profile picture form -->
    <div class="modal fade" id="profilePictureModal" tabindex="-1" role="dialog" aria-labelledby="profilePictureModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form th:action="@{/users/upload-picture}" th:method="POST" enctype="multipart/form-data">
                    <div class="modal-header">
                        <h5 class="modal-title" id="profilePictureModalLabel">Change profile picture</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <input style="border: black" type="file" id="file" class="form-control-file" name="file"
                               accept="image/x-png,image/jpeg,image/jpg">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Profile picture form -->
    <div class="modal fade" id="changeUsernameModal" tabindex="-1" role="dialog" aria-labelledby="changeUsernameLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form th:action="@{/users/change-username}" th:method="POST">
                    <div class="modal-header">
                        <h5 class="modal-title" id="changePhraseLabel">Change username</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <label for="username">Username</label>
                        <input th:field="${user.username}" type="text" minlength="4" maxlength="30" id="username" name="username" class="form-control" th:placeholder="${user.username}">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script type="text/javascript" th:src="@{/js/profilePage.js}"></script>
    <footer th:replace="fragments/commons::footer"></footer>
</body>

</html>